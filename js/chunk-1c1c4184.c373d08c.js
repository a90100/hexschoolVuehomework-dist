(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c1c4184"],{"35fa":function(t,e,o){"use strict";var a=o("71e0"),n=o.n(a);n.a},"53b7":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"main"}},[o("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.opencloseModal(!0)}}},[t._v("新增優惠券")]),1==t.modalShow?o("div",{attrs:{id:"couponModal"}},[o("h4",{staticClass:"h4"},[t._v("新增優惠券")]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"title"}},[t._v("標題")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{id:"title",type:"text",placeholder:"請輸入優惠券名稱"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),o("div",{staticClass:"form-row"},[o("div",{staticClass:"form-group col-md-6"},[o("label",{attrs:{for:"category"}},[t._v("折扣 % 數")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{id:"category",type:"number",placeholder:"請輸入數字"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})]),o("div",{staticClass:"form-group col-md-6"},[o("label",{attrs:{for:"price"}},[t._v("到期日")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.due_date,expression:"tempCoupon.due_date"}],staticClass:"form-control",attrs:{id:"unit",type:"date",placeholder:"請輸入日期"},domProps:{value:t.tempCoupon.due_date},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"due_date",e.target.value)}}})])]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"title"}},[t._v("優惠券號碼")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{id:"title",type:"text",placeholder:"請輸入優惠券號碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("div",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{id:"is_enabled",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(e){var o=t.tempCoupon.is_enabled,a=e.target,n=a.checked?1:0;if(Array.isArray(o)){var s=null,i=t._i(o,s);a.checked?i<0&&t.$set(t.tempCoupon,"is_enabled",o.concat([s])):i>-1&&t.$set(t.tempCoupon,"is_enabled",o.slice(0,i).concat(o.slice(i+1)))}else t.$set(t.tempCoupon,"is_enabled",n)}}}),o("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.opencloseModal}},[t._v("取消")]),o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])]):t._e(),o("table",{staticClass:"table"},[t._m(0),o("tbody",t._l(t.coupons,function(e,a){return o("tr",{key:a},[o("td",[t._v(t._s(e.title))]),o("td",[t._v(t._s(e.code))]),o("td",[t._v(t._s(e.percent))]),o("td",[t._v(t._s(e.due_date))]),o("td",[1==e.is_enabled?o("span",{staticClass:"text-success"},[t._v("啟用")]):o("span",{staticClass:"text-danger"},[t._v("未啟用")])]),o("td",[o("button",{staticClass:"btn btn-sm btn-outline-info",attrs:{type:"button"},on:{click:function(o){return t.opencloseModal(!1,e)}}},[t._v("編輯")])]),o("td",[o("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"button"},on:{click:function(o){return t.deleteCoupon(e)}}},[t._v("刪除")])])])}),0)])])},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",[t._v("優惠券名稱")]),o("th",[t._v("優惠券號碼")]),o("th",{attrs:{width:"80"}},[t._v("折扣")]),o("th",{attrs:{width:"120"}},[t._v("到期日")]),o("th",{attrs:{width:"90"}},[t._v("是否啟用")]),o("th",{attrs:{width:"80"}}),o("th",{attrs:{width:"80"}})])])}],s={name:"DashboardCoupons",data:function(){return{coupons:[],tempCoupon:{},modalShow:!1,isNew:!1}},methods:{getCoupons:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("harry_xie","/admin/coupons");this.$http.get(e).then(function(e){console.log(e.data),t.coupons=e.data.coupons})},opencloseModal:function(t,e){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=Object.assign({},e),this.isNew=!1),this.modalShow=!this.modalShow},updateCoupon:function(){this.modalShow=!this.modalShow;var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("harry_xie","/admin/coupon"),o="post";t.isNew||(e="".concat("https://vue-course-api.hexschool.io","/api/").concat("harry_xie","/admin/coupon/").concat(t.tempCoupon.id),o="put"),this.$http[o](e,{data:t.tempCoupon}).then(function(e){console.log(e),t.getCoupons()})},deleteCoupon:function(t){var e=this;e.tempCoupon=Object.assign({},t);var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("harry_xie","/admin/coupon/").concat(e.tempCoupon.id);this.$http.delete(o,{data:e.tempCoupon}).then(function(t){console.log(t.data),t.data.success&&e.getCoupons()})}},created:function(){this.getCoupons()}},i=s,c=(o("35fa"),o("2877")),p=Object(c["a"])(i,a,n,!1,null,null,null);e["default"]=p.exports},"71e0":function(t,e,o){}}]);
//# sourceMappingURL=chunk-1c1c4184.c373d08c.js.map